@using CollegeVotingSystem.Models
@model tbl_User
@{
    ViewBag.Title = "Update User Biometric";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="pagetitle">
    <h1>My Profile</h1>
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">Dashboard</a></li>
            <li class="breadcrumb-item"><a href="@Url.Action("Index", "User")">User</a></li>
            <li class="breadcrumb-item active">@ViewBag.Title</li>
        </ol>
    </nav>
</div>

<div class="row g-2">
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <div class="card-title">@ViewBag.Title</div>
                @using (Html.BeginForm())
                {
                    <div class="row mb-2 g-2">
                        <div class="col-md-12">
                            @Html.HiddenFor(model => model.ID)
                            @Html.HiddenFor(model => model.Username)
                            <input type="hidden" name="Fingerprint1" value="" />
                            @if (ViewBag.Message != null)
                            {
		                        <p class="alert alert-success"><i class="fa fa-check-circle"></i> @ViewBag.Message</p>
                            }
                            @Html.AntiForgeryToken()
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        </div>
                        <div class="col-md-12">
                            <div id="Container">
                                <nav class="navbar navbar-inverse">
                                    <div class="container-fluid">
                                        <div class="navbar-header">
                                            <div class="navbar-brand" href="#" style="color: white;">Fingerprint WebAPI</div>
                                        </div>
                                        <ul class="nav navbar-nav">
                                            <li id="Reader" class="active">
                                                <a href="#" style="color: white;" onclick="toggle_visibility(['content-reader','content-capture']);setActive('Reader','Capture')">
                                                    Reader
                                                </a>
                                            </li>
                                        </ul>
                                        <ul class="nav navbar-nav">
                                            <li id="Capture" class="">
                                                <a href="#" style="color: white;" onclick="toggle_visibility(['content-capture','content-reader']);setActive('Capture','Reader')">
                                                    Capture
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </nav>
                                <div id="Scores">
                                    <h5>Scan Quality : <input type="text" id="qualityInputBox" size="20" style="background-color:#DCDCDC;text-align:center;"></h5>

                                </div>
                                <div id="content-capture" style="display : none;">
                                    <div id="status"></div>
                                    <div id="imagediv"></div>
                                    <div id="contentButtons">
                                        <table width=70% align="center">
                                            <tr>
                                                <td>
                                                    <input type="button" class="btn btn-primary" id="clearButton" value="Clear" onclick="Javascript:onClear()">
                                                </td>
                                                <td data-toggle="tooltip" title="Will work with the .png format.">
                                                    <input type="button" class="btn btn-primary" id="save" value="Save">
                                                </td>
                                                <td>
                                                    <input type="button" class="btn btn-primary" id="start" value="Start" onclick="Javascript:onStart()">
                                                </td>
                                                <td>
                                                    <input type="button" class="btn btn-primary" id="stop" value="Stop" onclick="Javascript:onStop()">
                                                </td>
                                                <td>
                                                    <input type="button" class="btn btn-primary" id="info" value="Info" onclick="Javascript:onGetInfo()">
                                                </td>
                                        </table>
                                    </div>

                                    <div id="imageGallery">
                                    </div>
                                    <div id="deviceInfo">
                                    </div>

                                    <div id="saveAndFormats">

                                        <div name="myForm" style="border : solid grey;padding:5px;">
                                            <b>Acquire Formats :</b><br>
                                            <table>
                                                <tr data-toggle="tooltip" title="Will save data to a .raw file.">
                                                    <td>
                                                        <input type="checkbox" name="Raw" value="1" onclick="checkOnly(this)"> RAW  <br>
                                                    </td>
                                                </tr>
                                                <tr data-toggle="tooltip" title="Will save data to a Intermediate file">
                                                    <td>
                                                        <input type="checkbox" name="Intermediate" value="2" onclick="checkOnly(this)"> Feature Set<br>
                                                    </td>
                                                </tr>
                                                <tr data-toggle="tooltip" title="Will save data to a .wsq file.">
                                                    <td>
                                                        <input type="checkbox" name="Compressed" value="3" onclick="checkOnly(this)"> WSQ<br>
                                                    </td>
                                                </tr>
                                                <tr data-toggle="tooltip" title="Will save data to a .png file.">
                                                    <td>
                                                        <input type="checkbox" name="PngImage" checked="true" value="4" onclick="checkOnly(this)"> PNG
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                        <br>
                                        <input type="button" class="btn btn-primary" id="saveImagePng" value="Export" onclick="Javascript:onImageDownload()">
                                    </div>

                                </div>

                                <div id="content-reader">
                                    <h4>Select Reader :</h4>
                                    <select class="form-control" id="readersDropDown" onchange="selectChangeEvent()"></select>
                                    <div id="readerDivButtons">
                                        <table width=70% align="center">
                                            <tr>
                                                <td>
                                                    <input type="button" class="btn btn-primary" id="refreshList" value="Refresh List"
                                                           onclick="Javascript:readersDropDownPopulate(false)">
                                                </td>
                                                <td>
                                                    <input type="button" class="btn btn-primary" id="capabilities" value="Capabilities"
                                                           data-toggle="modal" data-target="#myModal" onclick="Javascript:populatePopUpModal()">
                                                </td>
                                            </tr>
                                        </table>

                                        <!-- Modal - Pop Up window content-->
                                        <div class="modal fade" id="myModal" role="dialog">
                                            <div class="modal-dialog">

                                                <!-- Modal content -->
                                                <div class="modal-content" id="modalContent">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                        <h4 class="modal-title">Reader Information</h4>
                                                    </div>
                                                    <div class="modal-body" id="ReaderInformationFromDropDown">

                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-md-12">
                            <input type="submit" value="Update" class="btn btn-success" />
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-body">
                <div class="card-title">Information</div>
                <div class="row">
                    <div class="col-md-3">
                        <img src="@string.Format("{0}", Model.Img == null ? Url.Content("~/Content/Img/noimage-available.jpeg") : Model.Img64)" width="100%" alt="Alternate Text" />
                    </div>
                    <div class="col-md-9">
                        <h4>@Model.Fullname</h4>
                        <span>@Model.CourseName</span><br />
                        <span><b>@Model.StudentID</b></span><br />
                        <span>@Model.Age Years old</span><br />
                        @if (string.IsNullOrEmpty(Model.Fingerprint1))
                        {
                            <span class="text-warning fa-fade"><i class="fa fa-exclamation-triangle"></i> No available fingerprint</span>
                        }
                        else
                        {
                            <span class="text-success"><i class="fa fa-check-circle"></i> Fingerprint verified</span>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
